{"remainingRequest":"C:\\Users\\12035\\Desktop\\Graduation Design Code\\client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\12035\\Desktop\\Graduation Design Code\\client\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\12035\\Desktop\\Graduation Design Code\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\12035\\Desktop\\Graduation Design Code\\client\\src\\components\\ConsumeManage\\ConsumeManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\12035\\Desktop\\Graduation Design Code\\client\\src\\components\\ConsumeManage\\ConsumeManage.vue","mtime":1711191102586},{"path":"C:\\Users\\12035\\Desktop\\Graduation Design Code\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1709809049101},{"path":"C:\\Users\\12035\\Desktop\\Graduation Design Code\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1709809049077},{"path":"C:\\Users\\12035\\Desktop\\Graduation Design Code\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1709809049101},{"path":"C:\\Users\\12035\\Desktop\\Graduation Design Code\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1709809064695}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkM6L1VzZXJzLzEyMDM1L0Rlc2t0b3AvR3JhZHVhdGlvbiBEZXNpZ24gQ29kZS9jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBnZXQsIHB1dCwgcG9zdCB9IGZyb20gJy4uLy4uL3V0aWxzL2h0dHAnOwppbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7CmltcG9ydCB7IE1lc3NhZ2UgfSBmcm9tICdlbGVtZW50LXVpJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdDb25zdW1lTWFuYWdlJywKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5nZXRMaXN0KCk7CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGlhbG9nRm9ybVZpc2libGU6IGZhbHNlLAogICAgICBydWxlczogewogICAgICAgIG5hbWU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICdUaGUgY29uc3VtcHRpb24gdHlwZSBuYW1lIGNhbm5vdCBiZSBlbXB0eScsCiAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJwogICAgICAgIH1dCiAgICAgIH0sCiAgICAgIGZvcm06IHsKICAgICAgICBuYW1lOiAnJwogICAgICB9LAogICAgICBmb3JtTGFiZWxXaWR0aDogJzE4MHB4JywKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIHBhcmFtczogewogICAgICAgIGhvdXNlSWQ6IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2hvdXNlSWQnKQogICAgICB9LAogICAgICB0YWJsZURhdGE6IFtdLAogICAgICBtb2RhbFRpdGxlOiAnQWRkIG5ldyBjb25zdW1wdGlvbiB0eXBlJywKICAgICAgc2VsZWN0ZWQ6ICcnCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgZm9ybWF0dGVyVGltZTogZnVuY3Rpb24gZm9ybWF0dGVyVGltZShyb3csIGNvbHVtbiwgY2VsbFZhbHVlKSB7CiAgICAgIHJldHVybiBtb21lbnQoY2VsbFZhbHVlKS5mb3JtYXQoJ1lZWVktTU0tREQgSEg6bW06c3MnKTsKICAgIH0sCiAgICB0YWJsZVJvd0NsYXNzTmFtZTogZnVuY3Rpb24gdGFibGVSb3dDbGFzc05hbWUoX3JlZikgewogICAgICB2YXIgcm93SW5kZXggPSBfcmVmLnJvd0luZGV4OwoKICAgICAgaWYgKHJvd0luZGV4ID09PSAxKSB7CiAgICAgICAgcmV0dXJuICd3YXJuaW5nLXJvdyc7CiAgICAgIH0gZWxzZSBpZiAocm93SW5kZXggPT09IDMpIHsKICAgICAgICByZXR1cm4gJ3N1Y2Nlc3Mtcm93JzsKICAgICAgfQoKICAgICAgcmV0dXJuICcnOwogICAgfSwKICAgIGdldExpc3Q6IGZ1bmN0aW9uIGdldExpc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICBnZXQoJy9jb25zdW1wdGlvblR5cGUvcXVlcnknLCBfb2JqZWN0U3ByZWFkKHt9LCB0aGlzLnBhcmFtcykpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgaWYgKHJlcy5kZXNjcmlwdGlvbiA9PT0gJ3N1Y2Nlc3MnKSB7CiAgICAgICAgICBfdGhpcy50YWJsZURhdGEgPSByZXMuZGF0YTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGFkZENvbnN1bWU6IGZ1bmN0aW9uIGFkZENvbnN1bWUoZm9ybSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuJHJlZnNbZm9ybV0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICB2YXIgcGFyYW1zID0gewogICAgICAgICAgICBuYW1lOiBfdGhpczIuZm9ybS5uYW1lLAogICAgICAgICAgICBob3VzZUlkOiBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdob3VzZUlkJykKICAgICAgICAgIH07CgogICAgICAgICAgaWYgKF90aGlzMi5tb2RhbFRpdGxlID09PSAnRWRpdCBDb25zdW1wdGlvbiBUeXBlJykgewogICAgICAgICAgICBwYXJhbXMuaWQgPSBfdGhpczIuc2VsZWN0ZWQ7CiAgICAgICAgICAgIHBhcmFtcy5uZXdOYW1lID0gX3RoaXMyLmZvcm0ubmFtZTsKICAgICAgICAgICAgZGVsZXRlIHBhcmFtcy5uYW1lOwogICAgICAgICAgICBwdXQoJy9jb25zdW1wdGlvblR5cGUvdXBkYXRlTmFtZScsIHBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgaWYgKHJlcy5kZXNjcmlwdGlvbiA9PT0gJ3N1Y2Nlc3MnKSB7CiAgICAgICAgICAgICAgICBNZXNzYWdlLnN1Y2Nlc3MoewogICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnU3VjY2Vzc2Z1bGx5IGVkaXRlZCBjb25zdW1wdGlvbiB0eXBlJwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBfdGhpczIuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICBfdGhpczIuZ2V0TGlzdCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBwb3N0KCcvY29uc3VtcHRpb25UeXBlL2FkZCcsIHBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgaWYgKHJlcy5kZXNjcmlwdGlvbiA9PT0gJ3N1Y2Nlc3MnKSB7CiAgICAgICAgICAgICAgICBNZXNzYWdlLnN1Y2Nlc3MoewogICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnU3VjY2Vzc2Z1bGx5IGFkZGVkIG5ldyBjb25zdW1wdGlvbiB0eXBlJwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBfdGhpczIuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICBfdGhpczIuZ2V0TGlzdCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGRlbGV0ZVJvdzogZnVuY3Rpb24gZGVsZXRlUm93KHJvdykgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHB1dCgnL2NvbnN1bXB0aW9uVHlwZS9kZWxldGVUeXBlJywgewogICAgICAgIGlkOiByb3cuaWQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5kZXNjcmlwdGlvbiA9PT0gJ3N1Y2Nlc3MnKSB7CiAgICAgICAgICBNZXNzYWdlLnN1Y2Nlc3MoewogICAgICAgICAgICBtZXNzYWdlOiAnU3VjY2Vzc2Z1bGx5IGRlbGV0ZWQgY29uc3VtcHRpb24gdHlwZScKICAgICAgICAgIH0pOwoKICAgICAgICAgIF90aGlzMy5nZXRMaXN0KCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBlZGl0Q29uc3VtcHRpb246IGZ1bmN0aW9uIGVkaXRDb25zdW1wdGlvbihyb3cpIHsKICAgICAgdGhpcy5tb2RhbFRpdGxlID0gJ0VkaXQgQ29uc3VtcHRpb24gVHlwZSc7CiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSB0cnVlOwogICAgICB0aGlzLmZvcm0ubmFtZSA9IHJvdy5uYW1lOwogICAgICB0aGlzLnNlbGVjdGVkID0gcm93LmlkOwogICAgfQogIH0KfTs="},{"version":3,"sources":["ConsumeManage.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"consume-manage\">\n    <div class=\"consume-manage-top\">\n      <el-button type=\"primary\" @click=\"dialogFormVisible = true\"\n        >Add new consumption type</el-button\n      >\n      <el-dialog\n        title=\"Add new consumption type\"\n        :visible.sync=\"dialogFormVisible\"\n        destroy-on-close\n      >\n        <el-form :model=\"form\" :rules=\"rules\" ref=\"form\">\n          <el-form-item\n            label=\"Consumption Type Name\"\n            :label-width=\"formLabelWidth\"\n            prop=\"name\"\n          >\n            <el-input v-model=\"form.name\" autocomplete=\"off\"></el-input>\n          </el-form-item>\n        </el-form>\n        <div slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"dialogFormVisible = false\">Cancel</el-button>\n          <el-button type=\"primary\" @click=\"addConsume('form')\"\n            >Confirm</el-button\n          >\n        </div>\n      </el-dialog>\n    </div>\n    <div class=\"consume-manage-content\" v-loading=\"loading\">\n      <el-table\n        class=\"user-manage-table\"\n        :data=\"tableData\"\n        style=\"width: 100%\"\n        :row-class-name=\"tableRowClassName\"\n      >\n        <el-table-column prop=\"index\" label=\"Order Number\" type=\"index\" width=\"180\">\n        </el-table-column>\n        <el-table-column prop=\"name\" label=\"Type Name\" width=\"180\">\n        </el-table-column>\n        <el-table-column\n          prop=\"createTime\"\n          :formatter=\"formatterTime\"\n          label=\"Creation Time\"\n        >\n        </el-table-column>\n        <el-table-column label=\"Operation\" width=\"200\">\n          <template slot-scope=\"scope\">\n            <el-button\n              type=\"text\"\n              size=\"small\"\n              slot=\"reference\"\n              @click=\"editConsumption(scope.row)\"\n              >Edit</el-button\n            >\n            <el-popconfirm\n              v-if=\"scope.row.isCustom !== 0\"\n              :title=\"`Are you sure to delete${scope.row.name}type?`\"\n              @confirm=\"deleteRow(scope.row)\"\n            >\n              <el-button\n                type=\"text\"\n                size=\"small\"\n                slot=\"reference\"\n                style=\"margin-left:20px\"\n                >Delete</el-button\n              >\n            </el-popconfirm>\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { get, put, post } from '../../utils/http'\nimport moment from 'moment'\nimport { Message } from 'element-ui'\n\nexport default {\n  name: 'ConsumeManage',\n  mounted() {\n    this.getList()\n  },\n  data() {\n    return {\n      dialogFormVisible: false,\n      rules: {\n        name: [\n          {\n            required: true,\n            message: 'The consumption type name cannot be empty',\n            trigger: 'change',\n          },\n        ],\n      },\n      form: {\n        name: '',\n      },\n      formLabelWidth: '180px',\n      loading: false,\n      params: {\n        houseId: sessionStorage.getItem('houseId'),\n      },\n      tableData: [],\n      modalTitle: 'Add new consumption type',\n      selected: '',\n    }\n  },\n  methods: {\n    formatterTime(row, column, cellValue) {\n      return moment(cellValue).format('YYYY-MM-DD HH:mm:ss')\n    },\n    tableRowClassName({ rowIndex }) {\n      if (rowIndex === 1) {\n        return 'warning-row'\n      } else if (rowIndex === 3) {\n        return 'success-row'\n      }\n      return ''\n    },\n    getList() {\n      this.loading = true\n      get('/consumptionType/query', {\n        ...this.params,\n      }).then((res) => {\n        this.loading = false\n        if (res.description === 'success') {\n          this.tableData = res.data\n        }\n      })\n    },\n    addConsume(form) {\n      this.$refs[form].validate((valid) => {\n        if (valid) {\n          let params = {\n            name: this.form.name,\n            houseId: sessionStorage.getItem('houseId'),\n          }\n          if (this.modalTitle === 'Edit Consumption Type') {\n            params.id = this.selected\n            params.newName = this.form.name\n            delete params.name\n            put('/consumptionType/updateName', params).then((res) => {\n              if (res.description === 'success') {\n                Message.success({ message: 'Successfully edited consumption type' })\n                this.dialogFormVisible = false\n                this.getList()\n              }\n            })\n          } else {\n            post('/consumptionType/add', params).then((res) => {\n              if (res.description === 'success') {\n                Message.success({ message: 'Successfully added new consumption type' })\n                this.dialogFormVisible = false\n                this.getList()\n              }\n            })\n          }\n        } else {\n          return false\n        }\n      })\n    },\n    deleteRow(row) {\n      put('/consumptionType/deleteType', { id: row.id }).then((res) => {\n        if (res.description === 'success') {\n          Message.success({ message: 'Successfully deleted consumption type' })\n\n          this.getList()\n        }\n      })\n    },\n    editConsumption(row) {\n      this.modalTitle = 'Edit Consumption Type'\n      this.dialogFormVisible = true\n      this.form.name = row.name\n      this.selected = row.id\n    },\n  },\n}\n</script>\n\n<style>\n.consume-manage {\n  height: calc(100% - 30px);\n}\n.consume-manage-top {\n  display: flex;\n  justify-content: flex-end;\n  padding-bottom: 15px;\n}\n.consume-manage-content {\n  height: calc(100% - 55px);\n}\n</style>\n"],"sourceRoot":"src/components/ConsumeManage"}]}