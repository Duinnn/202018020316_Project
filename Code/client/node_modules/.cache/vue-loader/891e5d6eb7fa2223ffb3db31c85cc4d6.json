{"remainingRequest":"C:\\Users\\12035\\Desktop\\bishe\\account-system-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\12035\\Desktop\\bishe\\account-system-master\\src\\components\\ConsumeManage\\ConsumeManage.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"C:\\Users\\12035\\Desktop\\bishe\\account-system-master\\src\\components\\ConsumeManage\\ConsumeManage.vue","mtime":1711191082979},{"path":"C:\\Users\\12035\\Desktop\\bishe\\account-system-master\\node_modules\\css-loader\\dist\\cjs.js","mtime":1709809064163},{"path":"C:\\Users\\12035\\Desktop\\bishe\\account-system-master\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1709809064695},{"path":"C:\\Users\\12035\\Desktop\\bishe\\account-system-master\\node_modules\\postcss-loader\\src\\index.js","mtime":1709809064578},{"path":"C:\\Users\\12035\\Desktop\\bishe\\account-system-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1709809049101},{"path":"C:\\Users\\12035\\Desktop\\bishe\\account-system-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1709809064695}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5jb25zdW1lLW1hbmFnZSB7CiAgaGVpZ2h0OiBjYWxjKDEwMCUgLSAzMHB4KTsKfQouY29uc3VtZS1tYW5hZ2UtdG9wIHsKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7CiAgcGFkZGluZy1ib3R0b206IDE1cHg7Cn0KLmNvbnN1bWUtbWFuYWdlLWNvbnRlbnQgewogIGhlaWdodDogY2FsYygxMDAlIC0gNTVweCk7Cn0K"},{"version":3,"sources":["ConsumeManage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ConsumeManage.vue","sourceRoot":"src/components/ConsumeManage","sourcesContent":["<template>\n  <div class=\"consume-manage\">\n    <div class=\"consume-manage-top\">\n      <el-button type=\"primary\" @click=\"dialogFormVisible = true\"\n        >Add new consumption type</el-button\n      >\n      <el-dialog\n        title=\"Add new consumption type\"\n        :visible.sync=\"dialogFormVisible\"\n        destroy-on-close\n      >\n        <el-form :model=\"form\" :rules=\"rules\" ref=\"form\">\n          <el-form-item\n            label=\"Consumption Type Name\"\n            :label-width=\"formLabelWidth\"\n            prop=\"name\"\n          >\n            <el-input v-model=\"form.name\" autocomplete=\"off\"></el-input>\n          </el-form-item>\n        </el-form>\n        <div slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"dialogFormVisible = false\">Cancel</el-button>\n          <el-button type=\"primary\" @click=\"addConsume('form')\"\n            >Confirm</el-button\n          >\n        </div>\n      </el-dialog>\n    </div>\n    <div class=\"consume-manage-content\" v-loading=\"loading\">\n      <el-table\n        class=\"user-manage-table\"\n        :data=\"tableData\"\n        style=\"width: 100%\"\n        :row-class-name=\"tableRowClassName\"\n      >\n        <el-table-column prop=\"index\" label=\"Order Number\" type=\"index\" width=\"180\">\n        </el-table-column>\n        <el-table-column prop=\"name\" label=\"Type Name\" width=\"180\">\n        </el-table-column>\n        <el-table-column\n          prop=\"createTime\"\n          :formatter=\"formatterTime\"\n          label=\"Creation Time\"\n        >\n        </el-table-column>\n        <el-table-column label=\"Operation\" width=\"200\">\n          <template slot-scope=\"scope\">\n            <el-button\n              type=\"text\"\n              size=\"small\"\n              slot=\"reference\"\n              @click=\"editConsumption(scope.row)\"\n              >Edit</el-button\n            >\n            <el-popconfirm\n              v-if=\"scope.row.isCustom !== 0\"\n              :title=\"`Are you sure to delete${scope.row.name}type?`\"\n              @confirm=\"deleteRow(scope.row)\"\n            >\n              <el-button\n                type=\"text\"\n                size=\"small\"\n                slot=\"reference\"\n                style=\"margin-left:20px\"\n                >Delete</el-button\n              >\n            </el-popconfirm>\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { get, put, post } from '../../utils/http'\nimport moment from 'moment'\nimport { Message } from 'element-ui'\n\nexport default {\n  name: 'ConsumeManage',\n  mounted() {\n    this.getList()\n  },\n  data() {\n    return {\n      dialogFormVisible: false,\n      rules: {\n        name: [\n          {\n            required: true,\n            message: 'The consumption type name cannot be empty',\n            trigger: 'change',\n          },\n        ],\n      },\n      form: {\n        name: '',\n      },\n      formLabelWidth: '180px',\n      loading: false,\n      params: {\n        houseId: sessionStorage.getItem('houseId'),\n      },\n      tableData: [],\n      modalTitle: 'Add new consumption type',\n      selected: '',\n    }\n  },\n  methods: {\n    formatterTime(row, column, cellValue) {\n      return moment(cellValue).format('YYYY-MM-DD HH:mm:ss')\n    },\n    tableRowClassName({ rowIndex }) {\n      if (rowIndex === 1) {\n        return 'warning-row'\n      } else if (rowIndex === 3) {\n        return 'success-row'\n      }\n      return ''\n    },\n    getList() {\n      this.loading = true\n      get('/consumptionType/query', {\n        ...this.params,\n      }).then((res) => {\n        this.loading = false\n        if (res.description === 'success') {\n          this.tableData = res.data\n        }\n      })\n    },\n    addConsume(form) {\n      this.$refs[form].validate((valid) => {\n        if (valid) {\n          let params = {\n            name: this.form.name,\n            houseId: sessionStorage.getItem('houseId'),\n          }\n          if (this.modalTitle === 'Edit Consumption Type') {\n            params.id = this.selected\n            params.newName = this.form.name\n            delete params.name\n            put('/consumptionType/updateName', params).then((res) => {\n              if (res.description === 'success') {\n                Message.success({ message: 'Successfully edited consumption type' })\n                this.dialogFormVisible = false\n                this.getList()\n              }\n            })\n          } else {\n            post('/consumptionType/add', params).then((res) => {\n              if (res.description === 'success') {\n                Message.success({ message: 'Successfully added new consumption type' })\n                this.dialogFormVisible = false\n                this.getList()\n              }\n            })\n          }\n        } else {\n          return false\n        }\n      })\n    },\n    deleteRow(row) {\n      put('/consumptionType/deleteType', { id: row.id }).then((res) => {\n        if (res.description === 'success') {\n          Message.success({ message: 'Successfully deleted consumption type' })\n\n          this.getList()\n        }\n      })\n    },\n    editConsumption(row) {\n      this.modalTitle = 'Edit Consumption Type'\n      this.dialogFormVisible = true\n      this.form.name = row.name\n      this.selected = row.id\n    },\n  },\n}\n</script>\n\n<style>\n.consume-manage {\n  height: calc(100% - 30px);\n}\n.consume-manage-top {\n  display: flex;\n  justify-content: flex-end;\n  padding-bottom: 15px;\n}\n.consume-manage-content {\n  height: calc(100% - 55px);\n}\n</style>\n"]}]}